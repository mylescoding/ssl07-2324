import matplotlib.pyplot as plt
import datetime
import matplotlib.dates as mdates

# Define the green times for each phase
phase1_times = [float(x) for x in ['1.00', '55.00', '38.00', '33.00', '60.00', '50.00', '60.00', '55.00', '55.00', '45.00', '55.00', '70.00', '45.00', '55.00', '60.00', '55.00', '33.00', '33.00', '33.00', '60.00', '55.00', '45.00', '70.00', '33.00', '60.00', '60.00', '90.00', '38.00', '38.00', '38.00', '40.00', '75.00', '55.00', '65.00', '65.00', '28.00', '38.00', '53.00', '48.00', '33.00', '38.00', '38.00', '38.00', '38.00', '33.00', '48.00', '43.00', '38.00', '48.00', '83.00', '65.00', '60.00', '38.00', '43.00', '43.00', '43.00', '38.00', '58.00', '55.00', '70.00', '40.00', '80.00', '38.00', '38.00', '48.00', '33.00', '48.00', '33.00', '43.00', '43.00', '48.00', '43.00', '33.00', '48.00', '43.00', '33.00', '48.00', '48.00', '43.00', '118.00', '43.00', '53.00', '63.00', '120.00', '48.00', '120.00', '68.00', '48.00', '53.00', '120.00', '48.00', '43.00', '120.00', '78.00', '58.00', '33.00', '33.00', '33.00', '33.00', '33.00', '33.00', '60.00', '55.00', '65.00', '60.00', '65.00', '40.00', '65.00', '55.00', '60.00', '28.00', '55.00', '70.00', '70.00', '33.00', '28.00', '40.00', '55.00', '70.00', '55.00', '55.00', '45.00', '65.00', '50.00', '65.00', '60.00', '25.00', '5.00']]
phase2_times = [float(x) for x in ['35.00', '8.00', '8.00', '8.00', '8.00', '8.00', '8.00', '8.00', '13.00', '8.00', '8.00', '8.00', '13.00', '8.00', '13.00', '13.00', '13.00', '8.00', '8.00', '8.00', '13.00', '8.00', '13.00', '8.00', '13.00', '13.00', '13.00', '13.00', '8.00', '8.00', '8.00', '13.00', '13.00', '13.00', '8.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '8.00', '13.00', '13.00', '8.00', '13.00', '8.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '8.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '8.00', '13.00', '13.00', '13.00', '13.00', '1.00', '23.00', '11.00', '18.00', '13.00', '13.00', '6.00', '13.00', '13.00', '6.00', '33.00', '13.00', '18.00', '13.00', '13.00', '18.00', '13.00', '8.00', '8.00', '13.00', '13.00', '8.00', '8.00', '8.00', '8.00', '13.00', '8.00', '8.00', '13.00', '13.00', '13.00', '13.00', '13.00', '3.00', '13.00', '8.00', '8.00', '13.00', '8.00', '8.00', '8.00', '13.00', '8.00', '5.00', '5.00']]
phase3_times = [float(x) for x in ['5.00', '10.00', '10.00', '10.00', '15.00', '10.00', '15.00', '15.00', '15.00', '10.00', '10.00', '15.00', '10.00', '10.00', '13.00', '18.00', '10.00', '15.00', '10.00', '15.00', '10.00', '15.00', '15.00', '10.00', '15.00', '10.00', '13.00', '20.00', '15.00', '15.00', '10.00', '15.00', '13.00', '20.00', '15.00', '13.00', '15.00', '13.00', '20.00', '15.00', '15.00', '15.00', '13.00', '20.00', '15.00', '13.00', '20.00', '13.00', '13.00', '20.00', '13.00', '13.00', '20.00', '15.00', '20.00', '13.00', '13.00', '20.00', '13.00', '18.00', '20.00', '13.00', '15.00', '15.00', '13.00', '20.00', '13.00', '23.00', '13.00', '23.00', '20.00', '13.00', '20.00', '13.00', '13.00', '13.00', '20.00', '13.00', '20.00', '13.00', '13.00', '13.00', '13.00', '42.00', '13.00', '28.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '38.00', '28.00', '13.00', '13.00', '28.00', '28.00', '13.00', '8.00', '10.00', '10.00', '15.00', '10.00', '15.00', '15.00', '10.00', '15.00', '10.00', '10.00', '10.00', '10.00', '15.00', '15.00', '15.00', '10.00', '10.00', '15.00', '10.00', '10.00', '15.00', '10.00', '15.00', '10.00', '15.00', '5.00', '5.00', '5.00']]
phase4_times = [float(x) for x in ['5.00', '20.00', '20.00', '5.00', '5.00', '5.00', '5.00', '10.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '8.00', '20.00', '20.00', '20.00', '5.00', '5.00', '5.00', '5.00', '20.00', '5.00', '5.00', '5.00', '13.00', '20.00', '20.00', '5.00', '5.00', '5.00', '8.00', '5.00', '20.00', '13.00', '20.00', '13.00', '13.00', '20.00', '20.00', '20.00', '13.00', '20.00', '20.00', '13.00', '20.00', '13.00', '13.00', '8.00', '8.00', '13.00', '20.00', '20.00', '20.00', '20.00', '13.00', '20.00', '13.00', '3.00', '5.00', '13.00', '20.00', '20.00', '13.00', '13.00', '13.00', '20.00', '13.00', '20.00', '20.00', '13.00', '20.00', '13.00', '13.00', '13.00', '20.00', '13.00', '20.00', '13.00', '13.00', '13.00', '13.00', '4.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '13.00', '20.00', '20.00', '20.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '20.00', '5.00', '5.00', '5.00', '20.00', '20.00', '5.00', '5.00', '5.00', '5.00', '5.00', '10.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00']]

print(len(phase1_times))
print(len(phase2_times))
print(len(phase3_times))
print(len(phase4_times))

# Generate time intervals from 6:00 AM to 10:00 AM, distributed over 52 points
start_time = datetime.datetime.strptime("06:00", "%H:%M")
time_intervals = [start_time + datetime.timedelta(minutes=1.875 * i) for i in range(len(phase1_times))]

# Plotting
plt.figure(figsize=(12, 5))
plt.plot(time_intervals, phase1_times, marker='o', label='Phase 1', color = 'green')
plt.plot(time_intervals, phase2_times, marker='s', label='Phase 2', color = 'yellow')
plt.plot(time_intervals, phase3_times, marker='^', label='Phase 3', color = 'red')
plt.plot(time_intervals, phase4_times, marker='d', label='Phase 4', color = 'blue')
plt.title("CTM Decentralized - Phase Green Times from 6 AM to 10 AM (Katipunan-University Road-F. Dela Rosa intersection)")
plt.xlabel("Time")
plt.ylabel("Green Time (s)")

# Setting x-axis ticks to 15-minute intervals
minutes = mdates.MinuteLocator(interval=30)
time_format = mdates.DateFormatter('%H:%M')
plt.gca().xaxis.set_major_locator(minutes)
plt.gca().xaxis.set_major_formatter(time_format)

# Setting x-axis limits
end_time = start_time + datetime.timedelta(hours=4)
plt.xlim([start_time, end_time])
#plt.ylim([15,150])

plt.grid(True)

# Add the legend
plt.legend()

plt.tight_layout()
plt.show()